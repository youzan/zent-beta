(self.webpackChunkzent_docs=self.webpackChunkzent_docs||[]).push([[6048],{86048:(e,t,n)=>{"use strict";n.d(t,{m:()=>f});var r=n(59312),i=n(24246),o=n(27378),d=n(60042),a=n.n(d),s=n(79737),l=n(68150);function c(){return(0,i.jsx)("div",(0,r.pi)({className:"tree-node-loading-wrapper","data-zv":"9.8.0"},{children:(0,i.jsx)("span",{className:"tree-node-loading","data-zv":"9.8.0"},void 0)}),void 0)}var p={id:"id",title:"title",children:"children",parentId:"parentId"};function h(e,t,n,r){void 0===e&&(e=[]),void 0===n&&(n=[]);var i=[],o={};return e.forEach((function(e){if(t[e]){var d=r?t[e].includes:t[e].includes.filter((function(e){return-1===n.indexOf(e)}));i.push.apply(i,d),o[e]=!0}})),e.forEach((function(e){if(t[e])for(var r=t[e].parentId;r;)o[r]?r=void 0:t[r].son.every((function(e){return o[e]||n.indexOf(e)>-1}))?(o[r]=!0,r=t[r].parentId):r=void 0})),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new Set,r=[],i=0;i<e.length;i++){var o=e[i];if(null!=o)for(var d=0;d<o.length;d++){var a=o[d];n.has(a)||(r.push(a),n.add(a))}}return r}(Object.keys(o).map((function(e){return t[e].id})),i)}function u(e){var t=e.data,n=e.isRoot,i=e.renderKey,o=e.dataType,d=e.expandAll,a=e.loadMore,s=e.checkable,l=e.disabledCheckedKeys,c=void 0===l?[]:l,u=e.checkedKeys,f=void 0===u?[]:u,v=(0,r.pi)((0,r.pi)({},p),i),x=v.children,y=v.parentId,m=v.id,g=[];if("plain"===o){var N={};t.forEach((function(e){N[e[m]]=(0,r.pi)({},e),e.isLeaf||(N[e[m]][x]=[])})),t.forEach((function(e){var t=n&&n(e)||0===e[y]||void 0===e[y]||"0"===e[y],r=N[e[m]];t?g.push(r):N[r[y]]&&N[r[y]][x].push(r)}))}else"tree"===o&&(g=t);var k=function(e){var t=e.expandAll,n=e.loadMore,r=e.tree,i=e.renderKey,o=void 0===i?p:i,d=[],a={},s=o.children,l=o.id;return function e(r){var i=r.nodeTree,o=r.parentId;i.forEach((function(r){var i=r[l];a[i]={id:i,parentId:o,root:r,isExpand:!1,isParent:!1,son:(r[s]||[]).map((function(e){return e[l]})),includes:[i]};var c=!(r.isLeaf||!(n||r[s]&&r[s].length>0));a[i].isParent=c,c&&(t||r.expand)&&d.push(i),r[s]&&e({nodeTree:r[s],parentId:i}),void 0!==o&&a[o]&&(a[o].includes=a[o].includes.concat(a[i].includes))}))}({nodeTree:r,parentId:void 0}),{rootInfoMap:a,expandNode:d}}({expandAll:d,checkable:s,loadMore:a,tree:g,renderKey:v}),b=k.rootInfoMap,z=k.expandNode,C=s?h(c,b):c,O=s?h(f,b,C,!0):f;return{tree:g,renderKey:v,rootInfoMap:b,expandNode:z,checkedNode:O,disabledNode:C}}var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state=(0,r.pi)({prevProps:t,loadingNode:[]},u(t)),n}return(0,r.ZT)(t,e),t.getDerivedStateFromProps=function(e,t){var n,i,o,d,a=t.prevProps;if(e===a)return null;if(e.data!==a.data||e.renderKey!==a.renderKey||e.expandAll!==a.expandAll||e.loadMore!==a.loadMore){var s=u(e),l=s.expandNode;return e.expandAll===a.expandAll&&(n=s,i=t.expandNode,o=n.rootInfoMap,d=n.expandNode,i.forEach((function(e){-1===d.indexOf(e)&&o[e]&&d.push(e)})),l=d),(0,r.pi)((0,r.pi)({prevProps:e},s),{expandNode:l})}if(e.checkable){var c={};return a.disabledCheckedKeys!==e.disabledCheckedKeys&&(c.disabledNode=h(e.disabledCheckedKeys,t.rootInfoMap)),a.checkedKeys!==e.checkedKeys&&(c.checkedNode=h(e.checkedKeys,t.rootInfoMap,c.disabledNode||t.disabledNode),c.checkedNode=c.checkedNode.filter((function(e){return-1===t.disabledNode.indexOf(e)||t.checkedNode.indexOf(e)>-1}))),(0,r.pi)((0,r.pi)({},c),{prevProps:e})}return{prevProps:e}},t.prototype.handleExpandClick=function(e,t){var n=this,r=this.state.renderKey.id,i=this.props,o=i.loadMore;if(i.foldable){var d=this.state.loadingNode,a="switcher"===t.currentTarget.classList[0];if(o&&(!e.children||0===e.children.length)){t.persist();var s=d.concat(e[r]);return this.setState({loadingNode:s}),void o(e).then((function(){n.setState({loadingNode:s.filter((function(t){return t!==e[r]}))}),n.handleExpand(e,a)})).catch((function(){n.setState({loadingNode:s.filter((function(t){return t!==e[r]}))})}))}this.handleExpand(e,a)}},t.prototype.handleExpand=function(e,t){var n=this.props,r=n.onExpand,i=n.autoExpandOnSelect,o=this.state.expandNode;if(t||i){var d=e[this.state.renderKey.id],a=o.slice(),s=!0;o.indexOf(d)>-1?a=o.filter((function(e){return e!==d})):(s=!1,a.push(d)),this.setState({expandNode:a}),r&&r(e,{isExpanded:!s})}},t.prototype.handleCheckboxClick=function(e){var t=this.props.onCheck,n=this.state,i=n.checkedNode,o=n.disabledNode,d=n.rootInfoMap,a=e[n.renderKey.id];i=i.indexOf(a)>-1?i.filter((function(e){return e!==a&&(o.indexOf(e)>-1||!(d[e].includes.indexOf(a)>-1)&&!(d[a].includes.indexOf(e)>-1))})):h((0,r.ev)([a],i),d,o);var s={currentRoot:e,disabled:o.map((function(e){return d[e].root})),all:[],top:[],bottom:[]};i.forEach((function(e){s.all.push(d[e].root),d[e].parentId&&-1!==i.indexOf(d[d[e].parentId].id)||s.top.push(d[e].root),(1===d[e].includes.length||d[e].includes.every((function(e){return-1===i.indexOf(e)})))&&s.bottom.push(d[e].root)})),t&&t(i,s)},t.prototype.renderSwitcher=function(e){var t=this;return(0,i.jsx)("i",{className:"zent-tree-switcher",onClick:function(n){t.handleExpandClick(e,n)},"data-zv":"9.8.0"},void 0)},t.prototype.renderContent=function(e,t){var n=this,o=this.state,d=o.rootInfoMap,a=o.renderKey,s=a.id,l=a.title,c=this.props,p=c.render,h=c.onSelect;return(0,i.jsx)("span",(0,r.pi)({className:"zent-tree-content",onClick:function(t){h&&h(e,t.currentTarget),d[e[s]].isParent&&n.handleExpandClick(e,t)},"data-zv":"9.8.0"},{children:p?p(e,t):e[l]}),void 0)},t.prototype.renderCheckbox=function(e){var t=this.props.checkable,n=this.state,r=n.checkedNode,o=n.disabledNode,d=n.rootInfoMap,a=n.renderKey;if(!t)return null;var s=e[a.id],c=r.indexOf(s)>-1,p=d[s].includes.filter((function(e){return-1===o.indexOf(e)})),h=!(c||!p.length||!p.some((function(e){return r.indexOf(e)>-1})));return(0,i.jsx)(l.ZP,{onChange:this.handleCheckboxClick.bind(this,e),checked:c,disabled:o.indexOf(s)>-1,indeterminate:h,width:e[a.title]},void 0)},t.prototype.renderOperations=function(e,t){var n=this.state.renderKey.id,o=this.props.operations;if(o){var d=o.map((function(o){return(o.shouldRender||function(){return!0})(e)&&(0,i.jsxs)("span",(0,r.pi)({onClick:o.action.bind(null,e,t),className:"zent-tree-operation","data-zv":"9.8.0"},{children:["string"==typeof o.icon?(0,i.jsx)("i",{className:o.icon,"data-zv":"9.8.0"},void 0):o.icon," ",o.name]}),o.name+"-"+e[n])}));return(0,i.jsx)("div",(0,r.pi)({className:"zent-tree-operation-container","data-zv":"9.8.0"},{children:d}),void 0)}return null},t.prototype.renderTreeNodes=function(e){var t=this,n=this.state,o=n.expandNode,d=n.loadingNode,l=n.rootInfoMap,p=n.renderKey,h=p.id,u=p.children;return e&&e.length>0?e.map((function(e){var n=e[h],p=o.indexOf(n)>-1,f=a()("zent-tree-bar",{"zent-tree-bar--off":!p});return(0,i.jsxs)("li",(0,r.pi)({"data-zv":"9.8.0"},{children:[(0,i.jsxs)("div",(0,r.pi)({className:f,"data-zv":"9.8.0"},{children:[l[n].isParent?t.renderSwitcher(e):null,(0,i.jsxs)("div",(0,r.pi)({className:"zent-tree-node","data-zv":"9.8.0"},{children:[t.renderCheckbox(e),d.indexOf(n)>-1?(0,i.jsx)(c,{},void 0):null,t.renderContent(e,p),t.renderOperations(e,p)]}),void 0)]}),void 0),e[u]&&e[u].length>0&&(0,i.jsx)(s.H,(0,r.pi)({appear:!0,duration:200,height:p?"auto":0},{children:(0,i.jsx)("ul",(0,r.pi)({className:"zent-tree-child","data-zv":"9.8.0"},{children:t.renderTreeNodes(e[u])}),"ul-"+n)}),void 0)]}),n)})):null},t.prototype.render=function(){var e,t=this.props,n=t.commonStyle,o=t.size,d=this.state.tree,s=a()("zent-tree",((e={})["zent-tree-"+o]="medium"!==o,e));return(0,i.jsx)("ul",(0,r.pi)({className:s,style:n,"data-zv":"9.8.0"},{children:this.renderTreeNodes(d)}),void 0)},t.defaultProps={autoExpandOnSelect:!0,dataType:"tree",foldable:!0,checkable:!1,size:"medium"},t}(o.Component)},79737:(e,t,n)=>{"use strict";n.d(t,{H:()=>s});var r=n(59312),i=n(24246),o=n(27378),d=n(17127);function a(e,t){e.style.height="number"==typeof t?t+"px":t}var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=(0,o.createRef)(),t.timer=null,t}return(0,r.ZT)(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.appear,r=t.height,i=t.duration,o=this.ref.current;n&&"auto"===r?(o.style.height="0px",(0,d.tA)((function(){e.props.height===r&&(o.style.height=o.offsetHeight+"px",e.timer=setTimeout((function(){e.timer=null,e.props.height===r&&(o.style.height="auto")}),i))}))):a(o,r)},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props,r=n.height,i=n.duration;if(e.height!==r){null!==this.timer&&(clearTimeout(this.timer),this.timer=null);var o=this.ref.current;if("auto"===e.height)o.style.height=o.offsetHeight+"px",(0,d.tA)((function(){t.props.height===r&&a(o,r)}));else if("auto"===r){var s=o.offsetHeight;o.style.height="auto";var l=o.offsetHeight;o.style.height=s+"px",(0,d.tA)((function(){o.style.height=l+"px",t.timer=setTimeout((function(){t.timer=null,t.props.height===r&&(o.style.height=r)}),i)}))}else a(o,r)}},t.prototype.render=function(){var e=this.props,t=e.duration,n=e.className,o=e.style,d=e.easing,a=e.overflow,s=e.children;return(0,i.jsx)("div",(0,r.pi)({ref:this.ref,className:n,style:(0,r.pi)((0,r.pi)({},o),{transition:"height "+t+"ms "+d,overflow:a}),"data-zv":"9.8.0"},{children:s}),void 0)},t.defaultProps={appear:!1,duration:200,easing:"ease",overflow:"hidden"},t}(o.Component)}}]);